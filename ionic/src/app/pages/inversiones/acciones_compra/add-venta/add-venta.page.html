
<ion-modal [isOpen]="isOpenModal" (willDismiss)="cancelar()">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title>AÃ±adir venta</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="isOpenModal=false">Cerrar</ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding">
      <form (ngSubmit)="onSubmit()" [formGroup]="formGroup">


        <ion-list>

          <ion-item>
            <ion-datetime-button 
              datetime="datetime"
            ></ion-datetime-button>
            <ion-modal [keepContentsMounted]="true">
              <ng-template>
                <ion-datetime                  
                  [firstDayOfWeek]="1"
                  formControlName="fecha"
                  locale="es-ES"
                  id="datetime"
                  presentation="date"
                ></ion-datetime>
              </ng-template>
            </ion-modal>
          </ion-item>

          <ion-item>
            <ion-label>Empresa</ion-label>
            <app-base-cargando *ngIf="isLoadingEmpresas" [message]="'Cargando empresas...'"></app-base-cargando>
            <ion-select *ngIf="!isLoadingEmpresas" formControlName="empresaid" interface="popover"
              placeholder="Seleccione" (ionChange)="select_empresa()">
              <ion-select-option *ngFor="let item of lstEmpresas" [value]="item['id']">{{ item["descripcion"]
                }}</ion-select-option>
            </ion-select>
          </ion-item>


          <ion-item >
          
              
              <ion-grid *ngIf="!isLoadingCompras" style="width: 100%;" >
                <ion-row>
                  <ion-col size="3">Fecha</ion-col>
                  <ion-col size="3">Acciones</ion-col>
                  <ion-col size="3">Precio</ion-col>
                  <ion-col size="3"></ion-col>
                </ion-row>

                <ion-row *ngFor="let compra of lstCompras">
                  <ion-col size="3">{{compra.fecha}}</ion-col>
                  <ion-col size="3">{{compra.acciones}}</ion-col>
                  <ion-col size="3">{{compra.precio}}</ion-col>
                  <ion-col size="3"><ion-checkbox (ionChange)="selectCompra($event,compra)"></ion-checkbox></ion-col>
                </ion-row>

              </ion-grid>

             
          </ion-item>
          <ion-item>
            <ion-label>Acciones</ion-label>
            {{formGroup.controls['acciones'].value}}
          </ion-item>
          <ion-item>
            <ion-input
                    type="number"
                    placeholder="Precio"
                    formControlName="precio"
                  ></ion-input>
          </ion-item>
          <ion-item>
            <ion-input
                    type="number"
                    placeholder="Comision"
                    formControlName="comision"
                  ></ion-input>
          </ion-item>
          <ion-item>
            <ion-input
                    type="number"
                    placeholder="Impuestos"
                    formControlName="impuestos"
                  ></ion-input>
          </ion-item>
          <ion-item>
            <ion-input
                    type="number"
                    placeholder="Total"
                    formControlName="total"
                  ></ion-input>
          </ion-item>



          <ion-item>
            <base-button-guardar [isSaving]="isSaving" [valid]="formGroup.valid"
              (click)="onSubmit()"></base-button-guardar>
            <base-button-cancelar (click)="cancelar()"></base-button-cancelar>
          </ion-item>

        </ion-list>
      </form>
    </ion-content>
  </ng-template>
</ion-modal>