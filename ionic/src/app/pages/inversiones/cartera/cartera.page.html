<app-editor-entity #editorEntity
  [entityName]="entityName"
  (saveEvent)="getCartera()"
  (deleteEvent)="getCartera()"
></app-editor-entity>

<ion-grid class="router-outlet">

  <ion-row>
    <ion-col>
      <ion-button color="success"    shape="round" size="small" (click)="managementCartera('bolsa/cartera',0)" >
        <ion-icon  slot="start" name="plus" ></ion-icon>  
        <ion-label>Añadir Cartera</ion-label>        
      </ion-button>
    </ion-col>
    <ion-col>
      <div class="flex_column">
        <span>beneficios : {{beneficios  | number : '1.2-2' }}€</span>
        <span>Inversión : {{inversionActual  | number : '1.2-2' }}€</span>


      </div>
      
    </ion-col>
    

  </ion-row>

  


  <ion-row>
    <ion-col>

      <div *ngIf="isLoading">
        <app-base-cargando [message]="'Cargando cartera...'"></app-base-cargando>
      </div>

      <div *ngFor="let cartera of lstCartera" class="grid ">
        <div class="col-12 itemTreeCompra" >
          <div class="grid head" [ngClass]="cartera.acciones > 0  ? 'fondo-activo' : (cartera.beneficios >= 0 ? 'fondo-beneficio' : 'fondo-perdida')">
            <div class="col-3 hand name-date"  (click)="managementCartera('bolsa/cartera',cartera.id)">
              <div class="text-top font-bold">{{ cartera.descripcion }}</div>
              <div>{{ cartera.fecha | date: 'dd/MM/yy' }}</div>
            </div>
            
            <div class="col-3 hand"  (click)="getOperaciones(cartera)">
              <div class="text-center precio-beneficio">
                <span>Acciones</span>
                <span class="acciones">{{ cartera.acciones | number : '1.4-4' }}</span>
                
              </div>
            </div>

            <div class="col-3"  (click)="selectedNode = selectedNode == cartera ?  null : cartera">
              <div class="text-center precio-beneficio">
                <span>{{cartera.beneficios >= 0 ? 'Beneficios' : 'Perdida'}}</span>
                <span [ngClass]="cartera.beneficios >= 0 ? 'beneficio' : 'perdida'" >{{ cartera.beneficios| number : '1.2-2' }} €</span>
              </div>
            </div>


            <div class="col-3">
    

              <ion-icon  (click)="management(cartera,'bolsa/compra',0)" class="hand" style="font-size: 24px;color: blue;" name="add-circle"></ion-icon>C

              <ion-icon  (click)="management(cartera,'bolsa/venta',0)" class="hand" style="font-size: 24px;color: orange;" name="add-circle"></ion-icon>V

            </div>
          </div>
         
         
          <div class="grid ventas"  *ngFor="let venta of cartera['lstVentas']" (click)="management(cartera,'bolsa/venta',venta.id)" >
            <div class="col-3">
              <div class="text-center">{{ venta.fecha | date: 'dd/MM/yy' }}</div>
            </div>
            <div class="col-3 flex_column">
              <div class="text-center">{{ venta.precio  | number : '1.4-4'  }}€</div>
              <div class="text-center">{{ venta.acciones | number : '1.4-4' }}</div>
            </div>
            <div class="col-3 flex_column">
              <div class="text-center">{{ venta.comision  | number : '1.2-2'  }}€</div>
              <div class="text-center">{{ venta.impuestos | number : '1.2-2' }}€</div>
            </div>
            <div class="col-3">
              <div class="text-center">{{ venta.total | number : '1.2-2' }}€</div>
            </div>
          </div> 


            <div class="grid compras"  *ngFor="let compra of cartera['lstCompras']" (click)="management(cartera,'bolsa/compra',compra.id)" >
              <div class="col-3">
                <div class="text-center">{{ compra.fecha | date: 'dd/MM/yy' }}</div>
              </div>
              <div class="col-3 flex_column">
                <div class="text-center">{{ compra.precio  | number : '1.4-4'  }}€</div>
                <div class="text-center">{{ compra.acciones | number : '1.4-4' }}</div>
              </div>
              <div class="col-3 flex_column">
                <div class="text-center">{{ compra.comision  | number : '1.2-2'  }}€</div>
                <div class="text-center">{{ compra.impuestos | number : '1.2-2' }}€</div>
              </div>
              <div class="col-3">
                <div class="text-center">{{ compra.total | number : '1.2-2' }}€</div>
              </div>
            </div> 



          </div>

          </div>
     
    </ion-col>
  </ion-row>
</ion-grid>
