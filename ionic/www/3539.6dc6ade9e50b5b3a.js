"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3539],{3539:(E,g,r)=>{r.r(g),r.d(g,{BolsaPageModule:()=>$});var u=r(177),f=r(4341),p=r(8974),l=r(8464),_=r(1547),v=r(8986),m=r(467),e=r(4438),b=r(276);const h=["editorEntity"];function j(a,c){1&a&&(e.j41(0,"ion-row")(1,"ion-col"),e.nrm(2,"gestor-empresas"),e.k0s()())}function k(a,c){1&a&&(e.j41(0,"div"),e.nrm(1,"app-base-cargando",14),e.k0s()),2&a&&(e.R7$(),e.Y8G("message","Cargando cartera..."))}function C(a,c){1&a&&e.nrm(0,"app-base-cargando",14),2&a&&e.Y8G("message","Cargando transacciones...")}function y(a,c){if(1&a){const t=e.RV6();e.j41(0,"div",36),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG(2).$implicit,s=e.XpG();return e.Njj(s.management(o,"bolsa/"+i.tipo,i.id))}),e.j41(1,"div",7)(2,"div",37),e.EFF(3),e.nI1(4,"date"),e.k0s()(),e.j41(5,"div",38)(6,"div",37),e.EFF(7),e.nI1(8,"number"),e.k0s(),e.j41(9,"div",37),e.EFF(10),e.nI1(11,"number"),e.k0s()(),e.j41(12,"div",38)(13,"div",37),e.EFF(14),e.nI1(15,"number"),e.k0s(),e.j41(16,"div",37),e.EFF(17),e.nI1(18,"number"),e.k0s()(),e.j41(19,"div",7)(20,"div",37),e.EFF(21),e.nI1(22,"number"),e.k0s()()()}if(2&a){const t=c.$implicit;e.ZvI("grid ",t.tipo,""),e.R7$(3),e.JRh(e.i5U(4,9,null==t?null:t.fecha,"dd/MM/yy")),e.R7$(4),e.SpI("",e.i5U(8,12,null==t?null:t.precio,"1.4-4"),"\u20ac"),e.R7$(3),e.JRh(e.i5U(11,15,null==t?null:t.acciones,"1.4-4")),e.R7$(4),e.SpI("",e.i5U(15,18,null==t?null:t.comision,"1.2-2"),"\u20ac"),e.R7$(3),e.SpI("",e.i5U(18,21,null==t?null:t.impuestos,"1.2-2"),"\u20ac"),e.R7$(4),e.SpI("",e.i5U(22,24,null==t?null:t.total,"1.2-2"),"\u20ac")}}function F(a,c){if(1&a&&(e.j41(0,"div",33),e.DNE(1,C,1,1,"app-base-cargando",34)(2,y,23,27,"div",35),e.k0s()),2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",t.loading),e.R7$(),e.Y8G("ngForOf",t.lstTransacciones)}}function I(a,c){if(1&a){const t=e.RV6();e.j41(0,"div",15)(1,"div",16)(2,"div",17)(3,"div",18),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.managementCartera("bolsa/cartera",i.id))}),e.j41(4,"div",19),e.EFF(5),e.k0s(),e.j41(6,"div")(7,"span",20),e.EFF(8),e.nI1(9,"date"),e.k0s()(),e.j41(10,"div")(11,"span",21),e.EFF(12),e.nI1(13,"date"),e.k0s()()(),e.j41(14,"div",22),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.expanded(i))}),e.j41(15,"div",23)(16,"span"),e.EFF(17,"Acciones"),e.k0s(),e.j41(18,"span",24),e.EFF(19),e.nI1(20,"number"),e.k0s()()(),e.j41(21,"div",25),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.selectedNode=o.selectedNode==i?null:i)})("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.expanded(i))}),e.j41(22,"div",23)(23,"span"),e.EFF(24),e.k0s(),e.j41(25,"span",26),e.EFF(26),e.nI1(27,"number"),e.k0s()()(),e.j41(28,"div",27)(29,"div",28)(30,"span"),e.EFF(31),e.k0s(),e.j41(32,"ion-icon",29),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.management(i,"bolsa/compra",0))}),e.k0s()(),e.j41(33,"div",28)(34,"span"),e.EFF(35),e.k0s(),e.j41(36,"ion-icon",30),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.management(i,"bolsa/venta",0))}),e.k0s()(),e.j41(37,"div",28)(38,"span"),e.EFF(39),e.k0s(),e.j41(40,"ion-icon",31),e.bIt("click",function(){const i=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.management(i,"bolsa/dividendo",0))}),e.k0s()()()(),e.DNE(41,F,3,2,"div",32),e.k0s()()}if(2&a){const t=c.$implicit;e.R7$(2),e.Y8G("ngClass",0==t.ventas?"fondo-activo":t.beneficios>=0?"fondo-beneficio":"fondo-perdida"),e.R7$(2),e.FS9("title",t.descripcion),e.R7$(),e.JRh(t.abreviatura),e.R7$(3),e.JRh(e.i5U(9,13,t.maxventa,"dd/MM/yy")),e.R7$(4),e.JRh(e.i5U(13,16,t.fecha,"dd/MM/yy")),e.R7$(7),e.JRh(e.i5U(20,19,t.acciones,"1.4-4")),e.R7$(5),e.JRh(0==t.ventas?"Invertido":t.beneficios>=0?"Beneficios":"Perdida"),e.R7$(),e.Y8G("ngClass",t.beneficios>=0?"beneficio":"perdida"),e.R7$(),e.SpI("",e.i5U(27,22,t.beneficios,"1.2-2")," \u20ac"),e.R7$(5),e.JRh(t.compras),e.R7$(4),e.JRh(t.ventas),e.R7$(4),e.JRh(t.dividendos),e.R7$(2),e.Y8G("ngIf",t.expanded)}}let B=(()=>{var a;class c extends l.BasePage{constructor(n,i,o,s){super(n,i,s),this.myHttpService=n,this.seguridadService=i,this.utilService=o,this.myHttpService_EXEC=s,this.lstTransacciones=["venta","compra","dividendo"],this.beneficios=0,this.entityNameCompra="accion_compra",this.entityNameVenta="accion_venta",this.isOpenModal=!1,this.inversionActual=0,this.addEmpresa=!1,this.entityName="bolsa/cartera"}ngOnInit(){var n=this;return(0,m.A)(function*(){n.Init(),yield n.getCartera()})()}handleRefresh(n){var i=this;return(0,m.A)(function*(){yield i.getCartera(),n.target.complete()})()}formatFecha(n){const i=new Date(n);return`${i.getDate()}/${i.getMonth()+1}/${i.getFullYear()}`}getCartera(){var n=this;return(0,m.A)(function*(){try{n.beneficios=0,n.inversionActual=0,n.lstCartera=[],n.isLoading=!0;const i=new l.classHttp("get",n.entityName,null),o=yield n.myHttpService.ejecuteURL(i);null!=o&&o.data&&(n.lstCartera=null==o?void 0:o.data,n.lstCartera.forEach(s=>{s.expanded=!1,0==parseInt(s.acciones)?n.beneficios+=parseFloat(s.beneficios):n.inversionActual+=parseFloat(s.beneficios)}))}catch{}finally{n.isLoading=!1}})()}management(n,i,o){const s=i,d={carteraid:n.id};(s.includes("venta")||s.includes("dividendo"))&&0==o&&(d.acciones=n.acciones),this.editorEntityComponent.management(o,{entityName:s,entityInitialValues:d})}managementCartera(n,i){this.editorEntityComponent.management(i,{entityName:n,entityInitialValues:{}})}expanded(n){var i=this;return(0,m.A)(function*(){n.expanded=!n.expanded,n.expanded?i.getTransacciones(n):n.lstTransacciones=null})()}getTransacciones(n){var i=this;return(0,m.A)(function*(){n.loading=!0;const o=n.id.toString();let s=new l.classHttp("get","bolsa/cartera",null,"getTransacciones",null,o);try{let d=yield i.myHttpService.ejecuteURL(s);n.lstTransacciones=null==d?void 0:d.data}catch(d){i.utilService.message(l.typeMessage.danger,d.message)}finally{n.loading=!1}})()}}return(a=c).\u0275fac=function(n){return new(n||a)(e.rXU(l.MyHttpService),e.rXU(l.SeguridadService),e.rXU(l.UtilService),e.rXU(l.MyHttpService_EXEC))},a.\u0275cmp=e.VBU({type:a,selectors:[["bolsa"]],viewQuery:function(n,i){if(1&n&&e.GBs(h,5),2&n){let o;e.mGM(o=e.lsd())&&(i.editorEntityComponent=o.first)}},features:[e.Vt3],decls:25,vars:14,consts:[["editorEntity",""],["slot","fixed",3,"ionRefresh"],[3,"saveEvent","deleteEvent","MostrarIconAdd","entityName"],[1,"router-outlet"],[1,"col-2"],["shape","round","size","small",3,"click","color"],["slot","start","name","business-outline"],[1,"col-3"],["color","success","shape","round","size","small",3,"click"],["slot","start","name","add-circle"],[1,"col-7"],[1,"flex_column","infoBeneInver"],[4,"ngIf"],["class","grid ",4,"ngFor","ngForOf"],[3,"message"],[1,"grid"],[1,"col-12","itemTreeCompra"],[1,"grid","head",3,"ngClass"],[1,"col-3","hand","name-date",3,"click"],[1,"text-top","font-bold",3,"title"],[1,"venta"],[1,"compra"],[1,"col-3","hand",3,"click"],[1,"text-center","precio-beneficio"],[1,"acciones"],[1,"col-3",3,"click"],[3,"ngClass"],[1,"col-3","flex_row"],[1,"flex_column","flex-center-align-items"],["name","add-circle",1,"hand",2,"font-size","24px","color","blue",3,"click"],["name","add-circle",1,"hand",2,"font-size","24px","color","orange",3,"click"],["name","add-circle",1,"hand",2,"font-size","24px","color","green",3,"click"],["class","operaciones",4,"ngIf"],[1,"operaciones"],[3,"message",4,"ngIf"],[3,"class","click",4,"ngFor","ngForOf"],[3,"click"],[1,"text-center"],[1,"col-3","flex_column"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"ion-refresher",1),e.bIt("ionRefresh",function(d){return e.eBV(o),e.Njj(i.handleRefresh(d))}),e.nrm(1,"ion-refresher-content"),e.k0s(),e.j41(2,"app-editor-entity",2,0),e.bIt("saveEvent",function(){return e.eBV(o),e.Njj(i.getCartera())})("deleteEvent",function(){return e.eBV(o),e.Njj(i.getCartera())}),e.k0s(),e.j41(4,"ion-grid",3)(5,"ion-row")(6,"ion-col",4)(7,"ion-button",5),e.bIt("click",function(){return e.eBV(o),e.Njj(i.addEmpresa=!i.addEmpresa)}),e.nrm(8,"ion-icon",6),e.k0s()(),e.j41(9,"ion-col",7)(10,"ion-button",8),e.bIt("click",function(){return e.eBV(o),e.Njj(i.managementCartera("bolsa/cartera",0))}),e.nrm(11,"ion-icon",9),e.k0s()(),e.j41(12,"ion-col",10)(13,"div",11)(14,"span"),e.EFF(15),e.nI1(16,"number"),e.k0s(),e.j41(17,"span"),e.EFF(18),e.nI1(19,"number"),e.k0s()()()(),e.DNE(20,j,3,0,"ion-row",12),e.j41(21,"ion-row")(22,"ion-col"),e.DNE(23,k,2,1,"div",12)(24,I,42,25,"div",13),e.k0s()()()}2&n&&(e.R7$(2),e.Y8G("MostrarIconAdd",!1)("entityName",i.entityName),e.R7$(5),e.Y8G("color",i.addEmpresa?"warning":"success"),e.R7$(8),e.SpI("beneficios : ",e.i5U(16,8,i.beneficios,"1.2-2"),"\u20ac"),e.R7$(3),e.SpI("Inversi\xf3n : ",e.i5U(19,11,i.inversionActual,"1.2-2"),"\u20ac"),e.R7$(2),e.Y8G("ngIf",i.addEmpresa),e.R7$(3),e.Y8G("ngIf",i.isLoading),e.R7$(),e.Y8G("ngForOf",i.lstCartera))},dependencies:[u.YU,u.Sq,u.bT,p.Jm,p.hU,p.lO,p.iq,p.To,p.Ki,p.ln,l.EditorEntityComponent,l.CargandoComponent,b.q,u.QX,u.vh],styles:[".itemTreeCompra[_ngcontent-%COMP%]{font-size:12px;padding-bottom:10px}.infoBeneInver[_ngcontent-%COMP%]{font-size:11px;color:navy}.precioTotal[_ngcontent-%COMP%]{color:#fff;background-color:navy}.head[_ngcontent-%COMP%]{border:solid 2px;padding:5px}.detail[_ngcontent-%COMP%]{border:solid 1px;padding:5px;background-color:#90ee90}.name-date[_ngcontent-%COMP%]{display:flex;flex-direction:column}.precio-beneficio[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-bottom:1px}.acciones[_ngcontent-%COMP%]{background-color:navy;color:#fff;padding:3px}.beneficio[_ngcontent-%COMP%]{background-color:green;color:#fff;padding:3px}.perdida[_ngcontent-%COMP%]{background-color:red;color:#fff;padding:3px;font-size:11px}.fondo-beneficio[_ngcontent-%COMP%]{background-color:#bef3be}.fondo-perdida[_ngcontent-%COMP%]{background-color:#f5cece}.fondo-activo[_ngcontent-%COMP%]{background-color:gray;color:#fff}.compra[_ngcontent-%COMP%]{background-color:#add8e6;border:solid 1px;width:98%}.venta[_ngcontent-%COMP%]{background-color:#ffa07a;border:solid 1px;width:98%}.dividendo[_ngcontent-%COMP%]{background-color:green;color:#fff;border:solid 1px;width:98%}"]}),c})();var R=r(6296);const P=[{path:"",component:B}];let $=(()=>{var a;class c{}return(a=c).\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[u.MD,f.YN,f.X1,p.bv,v.iI.forChild(P),l.SharedComponentsModule,_.bG,R.g]}),c})()}}]);