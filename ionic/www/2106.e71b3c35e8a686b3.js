"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2106],{2106:(C,h,r)=>{r.r(h),r.d(h,{EstadisticasPageModule:()=>F});var u=r(177),d=r(4341),l=r(4742),c=r(8464),f=r(8986),m=r(467),t=r(4438);function v(i,o){if(1&i){const e=t.RV6();t.j41(0,"div")(1,"my-table",5),t.bIt("selecting",function(n){t.eBV(e);const a=t.XpG();return t.Njj(a.selectingWithoutEmpresa(n))}),t.k0s(),t.nrm(2,"my-table",6),t.k0s()}if(2&i){const e=t.XpG();t.R7$(),t.Y8G("loadOnInit",!0)("canAddEntity",e.user.isAdmin)("canUpdateEntity",e.user.isAdmin)("tableResult","resultWithoutEmpresa")("tableResultCount","resultWithoutEmpresacount")("dataFromOut",e.resultWithoutEmpresa)("title","Resumen X mes")("entityName",e.entityName)("columns",e.columnsWithout)("refresh",e.tableRefresh)("withCache",!0),t.R7$(),t.Y8G("loadOnInit",!0)("canAddEntity",e.user.isAdmin)("canUpdateEntity",e.user.isAdmin)("tableResult","resultWithEmpresa")("tableResultCount","resultWithEmpresacount")("title","Resumen X Empresas")("entityName",e.entityName)("columns",e.columns)("refresh",e.tableRefresh)("dataFromOut",e.resultWithEmpresa)("withCache",!0)}}function g(i,o){if(1&i&&(t.j41(0,"ion-select-option",11),t.EFF(1),t.k0s()),2&i){const e=o.$implicit;t.Y8G("value",e.id),t.R7$(),t.JRh(e.descripcion)}}function E(i,o){if(1&i&&(t.j41(0,"div",12)(1,"div",13),t.EFF(2),t.k0s(),t.j41(3,"div",13)(4,"div",14)(5,"div"),t.EFF(6),t.nI1(7,"date"),t.k0s(),t.j41(8,"span",15),t.EFF(9),t.nI1(10,"number"),t.k0s()()(),t.j41(11,"div",13)(12,"div"),t.EFF(13),t.nI1(14,"date"),t.k0s(),t.j41(15,"span",16),t.EFF(16),t.nI1(17,"number"),t.k0s()()()),2&i){const e=o.$implicit;t.R7$(2),t.SpI(" ",e.abreviatura," "),t.R7$(4),t.JRh(t.i5U(7,5,e.fechacompra,"dd/MM/yy")),t.R7$(3),t.JRh(t.i5U(10,8,e.preciocompra,"1.2-2")),t.R7$(4),t.JRh(t.i5U(14,11,e.fechaventa,"dd/MM/yy")),t.R7$(3),t.JRh(t.i5U(17,14,e.precioventa,"1.2-2"))}}function _(i,o){if(1&i){const e=t.RV6();t.j41(0,"div",7)(1,"ion-select",8),t.mxI("ngModelChange",function(n){t.eBV(e);const a=t.XpG();return t.DH7(a.Empresaselected,n)||(a.Empresaselected=n),t.Njj(n)}),t.bIt("ionChange",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.selectedEmpresa())}),t.DNE(2,g,2,2,"ion-select-option",9),t.k0s(),t.DNE(3,E,18,17,"div",10),t.k0s()}if(2&i){const e=t.XpG();t.R7$(),t.R50("ngModel",e.Empresaselected),t.R7$(),t.Y8G("ngForOf",e.lstItemEmpresas),t.R7$(),t.Y8G("ngForOf",e.resultComprasVentas)}}function y(i,o){if(1&i&&(t.j41(0,"div"),t.nrm(1,"my-table",17),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("loadOnInit",!0)("canAddEntity",e.user.isAdmin)("canUpdateEntity",e.user.isAdmin)("tableResult","resultFondosActivos")("tableResultCount","resultFondosActivoscount")("dataFromOut",e.resultFondosActivos)("title","Activos")("entityName",e.entityName)("columns",e.columnsFondosActivos)("refresh",e.tableRefresh)("withCache",!0)}}const R=[{path:"",component:(()=>{var i;class o extends c.BasePage{constructor(s){super(s),this.basePageService=s,this.addEmpresa=!1,this.lstItemEmpresas=[],this.columnsFondosActivos=[{name:"e",prop:"ab",type:"text"},{name:"Fi",prop:"fechainicio",type:"date"},{name:"Ff",prop:"fechafin",type:"date"},{name:"i",prop:"interes",type:"number"},{name:"i",prop:"importe",type:"number"}],this.columnsWithout=[{name:"F",prop:"fecha",type:"text"},{name:"f",prop:"fondo",type:"number",decimalNamber:"1.2-2"},{name:"l",prop:"letra",type:"number",decimalNamber:"1.2-2"},{name:"b",prop:"bolsa",type:"number",decimalNamber:"1.2-2"},{name:"t",prop:"total",type:"number",decimalNamber:"1.2-2"}],this.columns=[{name:"E",prop:"em",type:"text"},{name:"F",prop:"fecha",type:"text"},{name:"B",prop:"importe",type:"number",decimalNamber:"1.2-2"}],this.resultWithEmpresa=[],this.resultWithoutEmpresa=[],this.resultFondosActivos=[],this.buttonsTab={},this.entityName="finanzas/estadisticas"}ngOnInit(){var s=this;return(0,m.A)(function*(){s.Init(),s.buttonTab("resumenxmes")})()}handleRefresh(s){var n=this;return(0,m.A)(function*(){yield n.getEstadisticas(),s.target.complete()})()}getEstadisticas(){var s=this;return(0,m.A)(function*(){try{s.isLoading=!0;const n=new c.classHttp("get",s.entityName,null),a=yield s.myHttpService.ejecuteURL(n);a&&(s.resultWithoutEmpresa=null==a?void 0:a.resultWithoutEmpresa,s.resultFondosActivos=null==a?void 0:a.resultFondosActivos,s.resultComprasVentasTMP=null==a?void 0:a.resultComprasVentas,s.resultComprasVentas=null==a?void 0:a.resultComprasVentas)}catch{}finally{s.isLoading=!1}})()}selectingWithoutEmpresa(s){var n=this;return(0,m.A)(function*(){const p=new c.classHttp("get",n.entityName,null,"getDetalle",null,{anno:s.anno,mes:s.mes}),b=yield n.myHttpService.ejecuteURL(p);n.resultWithEmpresa=null==b?void 0:b.resultWithEmpresa})()}buttonTab(s){var n=this;return(0,m.A)(function*(){for(const a in n.buttonsTab)n.buttonsTab[a]=!1;"compravsventas"===(n.buttonsTab[s]||(n.buttonsTab[s]=!0),n.buttonsTab[s]=!0,s)?yield n.getlstItemEmpresas():n.getEstadisticas()})()}getlstItemEmpresas(){var s=this;return(0,m.A)(function*(){s.lstItemEmpresas=[];const n=new c.classHttp("get","finanzas/empresa",null),a=yield s.myHttpService.ejecuteURL(n);s.lstItemEmpresas=null==a?void 0:a.data})()}selectedEmpresa(){this.resultComprasVentas=this.resultComprasVentasTMP.filter(s=>s.empresaid==this.Empresaselected)}}return(i=o).\u0275fac=function(s){return new(s||i)(t.rXU(c.BasePageService))},i.\u0275cmp=t.VBU({type:i,selectors:[["estadisticas"]],features:[t.Vt3],decls:15,vars:12,consts:[["slot","fixed",3,"ionRefresh"],["slot","bottom"],[3,"click","selected"],[4,"ngIf"],["class","compravsventas",4,"ngIf"],[3,"selecting","loadOnInit","canAddEntity","canUpdateEntity","tableResult","tableResultCount","dataFromOut","title","entityName","columns","refresh","withCache"],[3,"loadOnInit","canAddEntity","canUpdateEntity","tableResult","tableResultCount","title","entityName","columns","refresh","dataFromOut","withCache"],[1,"compravsventas"],["label","Empresa ","placeholder","selecciona",3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","grid itemCompraVenta",4,"ngFor","ngForOf"],[3,"value"],[1,"grid","itemCompraVenta"],[1,"col-4"],[1,"flex_col","center"],[1,"preciocompra"],[1,"precioventa"],[3,"loadOnInit","canAddEntity","canUpdateEntity","tableResult","tableResultCount","dataFromOut","title","entityName","columns","refresh","withCache"]],template:function(s,n){1&s&&(t.j41(0,"ion-refresher",0),t.bIt("ionRefresh",function(p){return n.handleRefresh(p)}),t.nrm(1,"ion-refresher-content"),t.k0s(),t.j41(2,"ion-tab-bar",1)(3,"ion-tab-button",2),t.bIt("click",function(){return n.buttonTab("resumenxmes")}),t.nrm(4,"icon-remixicon"),t.EFF(5," Resumen X mes "),t.k0s(),t.j41(6,"ion-tab-button",2),t.bIt("click",function(){return n.buttonTab("compravsventas")}),t.nrm(7,"icon-remixicon"),t.EFF(8," Compras vs Ventas "),t.k0s(),t.j41(9,"ion-tab-button",2),t.bIt("click",function(){return n.buttonTab("fondosactivos")}),t.nrm(10,"icon-remixicon"),t.EFF(11," Fondos Activos "),t.k0s()(),t.DNE(12,v,3,22,"div",3)(13,_,4,3,"div",4)(14,y,2,11,"div",3)),2&s&&(t.R7$(3),t.Y8G("selected",n.buttonsTab.resumenxmes),t.R7$(),t.HbH("ri-line-chart-line"),t.R7$(2),t.Y8G("selected",n.buttonsTab.compravsventas),t.R7$(),t.HbH("ri-shopping-bag-line"),t.R7$(2),t.Y8G("selected",n.buttonsTab.fondosactivos),t.R7$(),t.HbH("ri-bar-chart-box-ai-fill"),t.R7$(2),t.Y8G("ngIf",n.buttonsTab.resumenxmes),t.R7$(),t.Y8G("ngIf",n.buttonsTab.compravsventas),t.R7$(),t.Y8G("ngIf",n.buttonsTab.fondosactivos))},dependencies:[u.Sq,u.bT,d.BC,d.vS,l.To,l.Ki,l.Nm,l.Ip,l.Jq,l.qW,l.Je,c.MyTableComponent,c.IconremixiconComponent,u.QX,u.vh],styles:[".tab-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.compravsventas[_ngcontent-%COMP%]{font-size:12px;padding:30px;border:solid 1px;background-color:#000;color:#fff}.itemCompraVenta[_ngcontent-%COMP%]{border:solid 1px white}.preciocompra[_ngcontent-%COMP%]{font-weight:700;color:#00f;font-size:14px;background-color:#fff;padding:1px}.precioventa[_ngcontent-%COMP%]{font-weight:700;color:orange;font-size:14px;background-color:#fff;align-items:center;align-content:center;padding:1px}"]}),o})()}];let F=(()=>{var i;class o{}return(i=o).\u0275fac=function(s){return new(s||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[u.MD,d.YN,d.X1,l.bv,f.iI.forChild(R),c.SharedComponentsModule,c.IconremixiconComponentModule]}),o})()}}]);