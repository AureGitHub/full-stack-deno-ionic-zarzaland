"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7890],{7890:(B,u,d)=>{d.r(u),d.d(u,{BolsaPageModule:()=>R});var g=d(177),m=d(4341),l=d(4742),p=d(8464),f=d(8986),_=d(467),e=d(4438);const v=["editorEntity"];function h(o,c){if(1&o&&(e.j41(0,"ion-select-option",16),e.EFF(1),e.k0s()),2&o){const i=c.$implicit;e.Y8G("value",i.id),e.R7$(),e.JRh(i.descripcion)}}function b(o,c){1&o&&(e.j41(0,"div"),e.nrm(1,"app-base-cargando",17),e.k0s()),2&o&&(e.R7$(),e.Y8G("message","Cargando cartera..."))}function j(o,c){1&o&&e.nrm(0,"app-base-cargando",17),2&o&&e.Y8G("message","Cargando transacciones...")}function C(o,c){if(1&o){const i=e.RV6();e.j41(0,"div",39),e.bIt("click",function(){const t=e.eBV(i).$implicit,a=e.XpG(2).$implicit,s=e.XpG();return e.Njj(s.management(a,"finanzas/"+t.tipo,t.id))}),e.j41(1,"div",4)(2,"div",40),e.EFF(3),e.nI1(4,"date"),e.k0s()(),e.j41(5,"div",41)(6,"div",40),e.EFF(7),e.nI1(8,"number"),e.k0s(),e.j41(9,"div",40),e.EFF(10),e.nI1(11,"number"),e.k0s()(),e.j41(12,"div",41)(13,"div",40),e.EFF(14),e.nI1(15,"number"),e.k0s(),e.j41(16,"div",40),e.EFF(17),e.nI1(18,"number"),e.k0s()(),e.j41(19,"div",4)(20,"div",40),e.EFF(21),e.nI1(22,"number"),e.k0s()()()}if(2&o){const i=c.$implicit;e.ZvI("grid ",i.tipo,""),e.R7$(3),e.JRh(e.i5U(4,9,null==i?null:i.fecha,"dd/MM/yy")),e.R7$(4),e.SpI("",e.i5U(8,12,null==i?null:i.precio,"1.4-4"),"\u20ac"),e.R7$(3),e.JRh(e.i5U(11,15,null==i?null:i.acciones,"1.4-4")),e.R7$(4),e.SpI("",e.i5U(15,18,null==i?null:i.comision,"1.2-2"),"\u20ac"),e.R7$(3),e.SpI("",e.i5U(18,21,null==i?null:i.impuestos,"1.2-2"),"\u20ac"),e.R7$(4),e.SpI("",e.i5U(22,24,null==i?null:i.total,"1.2-2"),"\u20ac")}}function k(o,c){if(1&o&&(e.j41(0,"div",36),e.DNE(1,j,1,1,"app-base-cargando",37)(2,C,23,27,"div",38),e.k0s()),2&o){const i=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",i.loading),e.R7$(),e.Y8G("ngForOf",i.lstTransacciones)}}function F(o,c){if(1&o){const i=e.RV6();e.j41(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21),e.bIt("click",function(){const t=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.managementCartera("finanzas/cartera",t.id))}),e.j41(4,"div",22),e.EFF(5),e.k0s(),e.j41(6,"div")(7,"span",23),e.EFF(8),e.nI1(9,"date"),e.k0s()(),e.j41(10,"div")(11,"span",24),e.EFF(12),e.nI1(13,"date"),e.k0s()()(),e.j41(14,"div",25),e.bIt("click",function(){const t=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.expanded(t))}),e.j41(15,"div",26)(16,"span"),e.EFF(17,"Acciones"),e.k0s(),e.j41(18,"span",27),e.EFF(19),e.nI1(20,"number"),e.k0s(),e.j41(21,"span",23),e.EFF(22),e.nI1(23,"number"),e.k0s(),e.j41(24,"span",24),e.EFF(25),e.nI1(26,"number"),e.k0s()()(),e.j41(27,"div",28),e.bIt("click",function(){const t=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.selectedNode=a.selectedNode==t?null:t)})("click",function(){const t=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.expanded(t))}),e.j41(28,"div",26)(29,"span"),e.EFF(30),e.k0s(),e.j41(31,"span",29),e.EFF(32),e.nI1(33,"number"),e.k0s(),e.j41(34,"span",29),e.EFF(35),e.nI1(36,"number"),e.k0s()()(),e.j41(37,"div",4)(38,"div",8)(39,"div",30)(40,"div",31)(41,"span"),e.EFF(42),e.k0s(),e.j41(43,"ion-icon",32),e.bIt("click",function(){const t=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.management(t,"finanzas/compra",0))}),e.k0s()(),e.j41(44,"div",31)(45,"span"),e.EFF(46),e.k0s(),e.j41(47,"ion-icon",33),e.bIt("click",function(){const t=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.management(t,"finanzas/venta",0))}),e.k0s()(),e.j41(48,"div",31)(49,"span"),e.EFF(50),e.k0s(),e.j41(51,"ion-icon",34),e.bIt("click",function(){const t=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.management(t,"finanzas/dividendo",0))}),e.k0s()()(),e.j41(52,"div")(53,"div")(54,"spa",24),e.EFF(55),e.nI1(56,"number"),e.k0s()(),e.j41(57,"div")(58,"spa",23),e.EFF(59),e.nI1(60,"number"),e.k0s()()()()()(),e.DNE(61,k,3,2,"div",35),e.k0s()()}if(2&o){const i=c.$implicit;e.R7$(2),e.Y8G("ngClass",i.acciones>0?"fondo-activo":i.beneficios>=0?"fondo-beneficio":"fondo-perdida"),e.R7$(2),e.FS9("title",i.descripcion),e.R7$(),e.JRh(i.abreviatura),e.R7$(3),e.JRh(e.i5U(9,19,i.maxventa,"dd/MM/yy")),e.R7$(4),e.JRh(e.i5U(13,22,i.fecha,"dd/MM/yy")),e.R7$(7),e.JRh(e.i5U(20,25,i.acciones,"1.4-4")),e.R7$(3),e.JRh(e.i5U(23,28,i.precionventas,"1.4-4")),e.R7$(3),e.JRh(e.i5U(26,31,i.preciocompras,"1.4-4")),e.R7$(5),e.JRh(i.acciones>0?"Invertido":i.beneficios>=0?"Beneficios":"Perdida"),e.R7$(),e.Y8G("ngClass",i.beneficios>=0?"beneficio":"perdida"),e.R7$(),e.SpI("",e.i5U(33,34,i.beneficios,"1.2-2")," \u20ac"),e.R7$(2),e.Y8G("ngClass",i.beneficios>=0?"beneficio":"perdida"),e.R7$(),e.SpI("",e.i5U(36,37,i.porcertaje,"1.2-2"),"%"),e.R7$(7),e.JRh(i.compras),e.R7$(4),e.JRh(i.ventas),e.R7$(4),e.JRh(i.dividendos),e.R7$(5),e.SpI("Compra : ",e.i5U(56,40,i.totalcompras,"1.2-2")," \u20ac"),e.R7$(4),e.SpI("Venta\xa0\xa0\xa0\xa0: ",e.i5U(60,43,i.totalventas,"1.2-2")," \u20ac"),e.R7$(2),e.Y8G("ngIf",i.expanded)}}const I=[{path:"",component:(()=>{var o;class c extends p.BasePage{constructor(n){super(n),this.basePageService=n,this.lstTransacciones=["venta","compra","dividendo"],this.beneficios=0,this.entityNameCompra="accion_compra",this.entityNameVenta="accion_venta",this.isOpenModal=!1,this.inversionActual=0,this.addEmpresa=!1,this.cartera_Abierta=!0,this.entityName="finanzas/cartera"}ngOnInit(){var n=this;return(0,_.A)(function*(){n.Init(),yield n.getCartera(),yield n.getlstItemEmpresas()})()}getlstItemEmpresas(){var n=this;return(0,_.A)(function*(){n.lstItemEmpresas=[];const t=new p.classHttp("get","finanzas/empresa",null),a=yield n.myHttpService.ejecuteURL(t);n.lstItemEmpresas=null==a?void 0:a.data})()}getCartera(){var n=this;return(0,_.A)(function*(){try{n.beneficios=0,n.inversionActual=0,n.lstCartera=[],n.isLoading=!0;const t=new p.classHttp("get",n.entityName,null),a=yield n.myHttpService.ejecuteURL(t);null!=a&&a.data&&(n.lstCartera=n.Empresaselected?null==a?void 0:a.data.filter(s=>s.empresaid==n.Empresaselected):null==a?void 0:a.data,n.cartera_Abierta&&(n.lstCartera=n.lstCartera.filter(s=>s.acciones>0)),n.lstCartera.forEach(s=>{s.expanded=!1,0==parseInt(s.acciones)?n.beneficios+=parseFloat(s.beneficios):n.inversionActual+=parseFloat(s.beneficios)}))}catch{}finally{n.isLoading=!1}})()}selectedEmpresa(){this.getCartera()}handleRefresh(n){var t=this;return(0,_.A)(function*(){yield t.getCartera(),n.target.complete()})()}formatFecha(n){const t=new Date(n);return`${t.getDate()}/${t.getMonth()+1}/${t.getFullYear()}`}management(n,t,a){const s=t,r={carteraid:n.id};(s.includes("venta")||s.includes("dividendo"))&&0==a&&(r.acciones=n.acciones),this.editorEntityComponent.management(a,{entityName:s,entityInitialValues:r})}managementCartera(n,t){this.editorEntityComponent.management(t,{entityName:n,entityInitialValues:{}})}expanded(n){var t=this;return(0,_.A)(function*(){n.expanded=!n.expanded,n.expanded?t.getTransacciones(n):n.lstTransacciones=null})()}getTransacciones(n){var t=this;return(0,_.A)(function*(){n.loading=!0;const a=n.id.toString();let s=new p.classHttp("get","finanzas/cartera",null,"getTransacciones",null,a);try{let r=yield t.myHttpService.ejecuteURL(s);n.lstTransacciones=null==r?void 0:r.data}catch(r){t.utilService.message(p.typeMessage.danger,r.message)}finally{n.loading=!1}})()}}return(o=c).\u0275fac=function(n){return new(n||o)(e.rXU(p.BasePageService))},o.\u0275cmp=e.VBU({type:o,selectors:[["bolsa"]],viewQuery:function(n,t){if(1&n&&e.GBs(v,5),2&n){let a;e.mGM(a=e.lsd())&&(t.editorEntityComponent=a.first)}},features:[e.Vt3],decls:28,vars:15,consts:[["editorEntity",""],["slot","fixed",3,"ionRefresh"],[3,"saveEvent","deleteEvent","MostrarIconAdd","entityName"],[1,"router-outlet"],[1,"col-3"],["color","success","shape","round","size","small",3,"click"],["slot","start","name","add-circle"],[1,"col-4"],[1,"flex_column"],["justify","start",3,"ngModelChange","ionChange","ngModel"],["label","Empresa ","placeholder","selecciona",3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-1"],[1,"flex_column","infoBeneInver"],[4,"ngIf"],["class","grid ",4,"ngFor","ngForOf"],[3,"value"],[3,"message"],[1,"grid"],[1,"col-12","itemTreeCompra"],[1,"grid","head",3,"ngClass"],[1,"col-3","hand","name-date",3,"click"],[1,"text-top","font-bold",3,"title"],[1,"precioventas"],[1,"preciocompras"],[1,"col-3","hand",3,"click"],[1,"text-center","precio-beneficio"],[1,"acciones"],[1,"col-3",3,"click"],[3,"ngClass"],[1,"flex_row"],[1,"flex_column","flex-center-align-items"],["name","add-circle",1,"hand",2,"font-size","24px","color","blue",3,"click"],["name","add-circle",1,"hand",2,"font-size","24px","color","orange",3,"click"],["name","add-circle",1,"hand",2,"font-size","24px","color","green",3,"click"],["class","operaciones",4,"ngIf"],[1,"operaciones"],[3,"message",4,"ngIf"],[3,"class","click",4,"ngFor","ngForOf"],[3,"click"],[1,"text-center"],[1,"col-3","flex_column"]],template:function(n,t){if(1&n){const a=e.RV6();e.j41(0,"ion-refresher",1),e.bIt("ionRefresh",function(r){return e.eBV(a),e.Njj(t.handleRefresh(r))}),e.nrm(1,"ion-refresher-content"),e.k0s(),e.j41(2,"app-editor-entity",2,0),e.bIt("saveEvent",function(){return e.eBV(a),e.Njj(t.getCartera())})("deleteEvent",function(){return e.eBV(a),e.Njj(t.getCartera())}),e.k0s(),e.j41(4,"ion-grid",3)(5,"ion-row")(6,"ion-col",4)(7,"ion-button",5),e.bIt("click",function(){return e.eBV(a),e.Njj(t.managementCartera("finanzas/cartera",0))}),e.nrm(8,"ion-icon",6),e.k0s()(),e.j41(9,"ion-col",7)(10,"div",8)(11,"ion-checkbox",9),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(t.cartera_Abierta,r)||(t.cartera_Abierta=r),e.Njj(r)}),e.bIt("ionChange",function(){return e.eBV(a),e.Njj(t.getCartera())}),e.EFF(12,"Abierta"),e.k0s(),e.j41(13,"ion-select",10),e.mxI("ngModelChange",function(r){return e.eBV(a),e.DH7(t.Empresaselected,r)||(t.Empresaselected=r),e.Njj(r)}),e.bIt("ionChange",function(){return e.eBV(a),e.Njj(t.getCartera())}),e.DNE(14,h,2,2,"ion-select-option",11),e.k0s()()(),e.nrm(15,"ion-col",12),e.j41(16,"ion-col",7)(17,"div",13)(18,"span"),e.EFF(19),e.nI1(20,"number"),e.k0s(),e.j41(21,"span"),e.EFF(22),e.nI1(23,"number"),e.k0s()()()(),e.j41(24,"ion-row")(25,"ion-col"),e.DNE(26,b,2,1,"div",14)(27,F,62,46,"div",15),e.k0s()()()}2&n&&(e.R7$(2),e.Y8G("MostrarIconAdd",!1)("entityName",t.entityName),e.R7$(9),e.R50("ngModel",t.cartera_Abierta),e.R7$(2),e.R50("ngModel",t.Empresaselected),e.R7$(),e.Y8G("ngForOf",t.lstItemEmpresas),e.R7$(5),e.SpI("benef. : ",e.i5U(20,9,t.beneficios,"1.2-2"),"\u20ac"),e.R7$(3),e.SpI("Inver. : ",e.i5U(23,12,t.inversionActual,"1.2-2"),"\u20ac"),e.R7$(4),e.Y8G("ngIf",t.isLoading),e.R7$(),e.Y8G("ngForOf",t.lstCartera))},dependencies:[g.YU,g.Sq,g.bT,m.BC,m.vS,l.Jm,l.eY,l.hU,l.lO,l.iq,l.To,l.Ki,l.ln,l.Nm,l.Ip,l.hB,l.Je,p.EditorEntityComponent,p.CargandoComponent,g.QX,g.vh],styles:[".itemTreeCompra[_ngcontent-%COMP%]{font-size:12px;padding-bottom:10px}.infoBeneInver[_ngcontent-%COMP%]{font-size:11px;color:navy}.precioTotal[_ngcontent-%COMP%]{color:#fff;background-color:navy}.head[_ngcontent-%COMP%]{border:solid 2px;padding:5px}.detail[_ngcontent-%COMP%]{border:solid 1px;padding:5px;background-color:#90ee90}.name-date[_ngcontent-%COMP%]{display:flex;flex-direction:column}.precio-beneficio[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-bottom:1px}.acciones[_ngcontent-%COMP%]{background-color:navy;color:#fff;padding:3px}.beneficio[_ngcontent-%COMP%]{background-color:green;color:#fff;padding:3px}.perdida[_ngcontent-%COMP%]{background-color:red;color:#fff;padding:3px;font-size:11px}.fondo-beneficio[_ngcontent-%COMP%]{background-color:#bef3be}.fondo-perdida[_ngcontent-%COMP%]{background-color:#f5cece}.fondo-activo[_ngcontent-%COMP%]{background-color:gray;color:#fff}.compra[_ngcontent-%COMP%]{background-color:#add8e6;border:solid 1px;width:98%}.venta[_ngcontent-%COMP%]{background-color:#ffa07a;border:solid 1px;width:98%}.dividendo[_ngcontent-%COMP%]{background-color:green;color:#fff;border:solid 1px;width:98%}.preciocompras[_ngcontent-%COMP%]{color:#00f}.precioventas[_ngcontent-%COMP%]{color:orange}"]}),c})()}];let R=(()=>{var o;class c{}return(o=c).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.MD,m.YN,m.X1,l.bv,f.iI.forChild(I),p.SharedComponentsModule]}),c})()}}]);