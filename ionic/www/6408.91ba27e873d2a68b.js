"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6408],{6408:(E,p,l)=>{l.r(p),l.d(p,{AgendaPageModule:()=>y});var m=l(177),_=l(4341),i=l(4742),s=l(8464),f=l(1547),h=l(8986),d=l(467),e=l(4438);const b=["editorEntity"];function v(a,u){if(1&a&&(e.j41(0,"ion-row")(1,"ion-col"),e.nrm(2,"tc-tipos",10),e.k0s()()),2&a){const r=e.XpG();e.R7$(2),e.Y8G("columns",r.columns)("entityName","casa/evento_tipo")("user",r.user)("tableRefresh",r.tableRefresh)}}function T(a,u){if(1&a){const r=e.RV6();e.j41(0,"ion-row",11)(1,"ion-col",7)(2,"ion-grid")(3,"ion-row")(4,"ion-col",12)(5,"ion-checkbox",13),e.mxI("ngModelChange",function(n){e.eBV(r);const o=e.XpG();return e.DH7(o.turnos.carmen,n)||(o.turnos.carmen=n),e.Njj(n)}),e.bIt("ionChange",function(){e.eBV(r);const n=e.XpG();return e.Njj(n.turnos.aure=!n.turnos.carmen)}),e.EFF(6,"Carmen"),e.k0s()(),e.j41(7,"ion-col",14)(8,"ion-checkbox",13),e.mxI("ngModelChange",function(n){e.eBV(r);const o=e.XpG();return e.DH7(o.turnos.aure,n)||(o.turnos.aure=n),e.Njj(n)}),e.bIt("ionChange",function(){e.eBV(r);const n=e.XpG();return e.Njj(n.turnos.carmen=!n.turnos.aure)}),e.EFF(9,"Aure"),e.k0s()()(),e.j41(10,"ion-row")(11,"ion-col",7)(12,"ion-radio-group",15),e.mxI("ngModelChange",function(n){e.eBV(r);const o=e.XpG();return e.DH7(o.tipoturno,n)||(o.tipoturno=n),e.Njj(n)}),e.j41(13,"ion-grid")(14,"ion-row")(15,"ion-col",16)(16,"ion-label"),e.EFF(17,"D\xeda"),e.k0s(),e.nrm(18,"ion-radio",17),e.k0s(),e.j41(19,"ion-col",16)(20,"ion-label"),e.EFF(21,"Semana"),e.k0s(),e.nrm(22,"ion-radio",18),e.k0s(),e.nrm(23,"ion-col",16),e.k0s()()()()()()()()}if(2&a){const r=e.XpG();e.R7$(5),e.R50("ngModel",r.turnos.carmen),e.R7$(3),e.R50("ngModel",r.turnos.aure),e.R7$(4),e.R50("ngModel",r.tipoturno)}}const j=[{path:"",component:(()=>{var a;class u extends s.BasePage{constructor(t){super(t),this.basePageService=t,this.buttonsTab={},this.turnos={},this.columns=[{name:"Descripci\xf3n",prop:"descripcion",type:"text",OrderInit:"ASC"},{name:"Color",prop:"color",type:"text"},{name:"BK Color",prop:"bkcolor",type:"text"}],this.entityName="casa/evento"}ngOnInit(){var t=this;return(0,d.A)(function*(){t.Init(),t.getEventos(),t.buttonTab("turnos")})()}handleRefresh(t){var n=this;return(0,d.A)(function*(){n.getEventos(),t.target.complete()})()}getEventos(){var t=this;return(0,d.A)(function*(){t.isLoading=!0;let n=new s.classHttp("get","casa/evento",null,"",null,null);try{let o=yield t.myHttpService.ejecuteURL(n);t.lstEventos=null==o?void 0:o.data}catch(o){t.utilService.message(s.typeMessage.danger,o.message)}finally{t.isLoading=!1}})()}gestionTurnos(t){var n=this;return(0,d.A)(function*(){if((n.turnos.carmen||n.turnos.aure)&&n.tipoturno){const o={};o.eventotipoid=n.turnos.aure?"2":"3",o.periodoturno=n.tipoturno,o.fecha=n.utilService.toISOString(new Date(t)),n.isLoading=!0,yield n.myHttpService_EXEC.Save("post","casa/evento",o,n.pk),n.getEventos()}})()}refreshSelectedDate(t){var n=this;return(0,d.A)(function*(){n.buttonsTab.turnos?yield n.gestionTurnos(t):n.editorEntityComponent.management(0,null)})()}refreshEnvents(t){}buttonTab(t){const n=this.buttonsTab[t];for(const o in this.buttonsTab)this.buttonsTab[o]=!1;n||(this.buttonsTab[t]=!this.buttonsTab.hasOwnProperty(t)||!this.buttonsTab[t])}}return(a=u).\u0275fac=function(t){return new(t||a)(e.rXU(s.BasePageService))},a.\u0275cmp=e.VBU({type:a,selectors:[["agenda"]],viewQuery:function(t,n){if(1&t&&e.GBs(b,5),2&t){let o;e.mGM(o=e.lsd())&&(n.editorEntityComponent=o.first)}},features:[e.Vt3],decls:17,vars:13,consts:[["editorEntity",""],["slot","fixed",3,"ionRefresh"],["slot","bottom"],[3,"click","selected"],[1,"router-outlet"],[4,"ngIf"],["class","turno",4,"ngIf"],[1,"col-12"],[3,"saveEvent","deleteEvent","MostrarIconAdd","entityName"],[3,"refreshEnvents","refreshSelectedDate","disabled","lan","eventSource"],[3,"columns","entityName","user","tableRefresh"],[1,"turno"],[1,"col-6",2,"background-color","lightgreen"],[3,"ngModelChange","ionChange","ngModel"],[1,"col-6",2,"background-color","lightblue"],[3,"ngModelChange","ngModel"],[1,"col-4"],["value","d"],["value","s"]],template:function(t,n){if(1&t){const o=e.RV6();e.j41(0,"ion-refresher",1),e.bIt("ionRefresh",function(g){return e.eBV(o),e.Njj(n.handleRefresh(g))}),e.nrm(1,"ion-refresher-content"),e.k0s(),e.j41(2,"ion-tab-bar",2)(3,"ion-tab-button",3),e.bIt("click",function(){return e.eBV(o),e.Njj(n.buttonTab("tipoeventos"))}),e.nrm(4,"icon-remixicon"),e.EFF(5," Tipo "),e.k0s(),e.j41(6,"ion-tab-button",3),e.bIt("click",function(){return e.eBV(o),e.Njj(n.buttonTab("turnos"))}),e.nrm(7,"icon-remixicon"),e.EFF(8," Turnos "),e.k0s()(),e.j41(9,"ion-grid",4),e.DNE(10,v,3,4,"ion-row",5)(11,T,24,3,"ion-row",6),e.j41(12,"ion-row")(13,"ion-col",7)(14,"app-editor-entity",8,0),e.bIt("saveEvent",function(){return e.eBV(o),e.Njj(n.getEventos())})("deleteEvent",function(){return e.eBV(o),e.Njj(n.getEventos())}),e.k0s(),e.j41(16,"my-calendar",9),e.bIt("refreshEnvents",function(g){return e.eBV(o),e.Njj(n.refreshEnvents(g))})("refreshSelectedDate",function(g){return e.eBV(o),e.Njj(n.refreshSelectedDate(g))}),e.k0s()()()()}2&t&&(e.R7$(3),e.Y8G("selected",n.buttonsTab.tipoeventos),e.R7$(),e.HbH("ri-image-add-fill"),e.R7$(2),e.Y8G("selected",n.buttonsTab.turnos),e.R7$(),e.HbH("ri-user-shared-line"),e.R7$(3),e.Y8G("ngIf",n.buttonsTab.tipoeventos),e.R7$(),e.Y8G("ngIf",n.buttonsTab.turnos),e.R7$(3),e.Y8G("MostrarIconAdd",!1)("entityName",n.entityName),e.R7$(2),e.Y8G("disabled",n.isLoading)("lan","ES")("eventSource",n.lstEventos))},dependencies:[m.bT,_.BC,_.vS,i.eY,i.hU,i.lO,i.he,i.KO,i.f0,i.To,i.Ki,i.ln,i.Jq,i.qW,i.hB,i.Je,s.EditorEntityComponent,s.Tc_tipoComponent,s.CalendarComponent,s.IconremixiconComponent],styles:[".turno[_ngcontent-%COMP%]{font-size:12px;background-color:#d3d3d3}"]}),u})()}];let y=(()=>{var a;class u{}return(a=u).\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.$C({type:a}),a.\u0275inj=e.G2t({imports:[m.MD,_.YN,_.X1,i.bv,h.iI.forChild(j),s.SharedComponentsModule,f.bG,s.CalendarComponentModule,s.IconremixiconComponentModule]}),u})()}}]);